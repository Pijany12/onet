define([],function(){"use strict";var a=-1===location.protocol.indexOf("http")?"https:":location.protocol,b=a+"//pulsembed.eu",c=function(){return(""+Math.random()).substr(2)},d=function(a){if(a.contentWindow){var c=a.getBoundingClientRect(),d=void 0!==window.innerHeight?window.innerHeight:document.documentElement.clientHeight,e=c.top,f=0;f=c.height?c.height:c.bottom-c.top;var g=0;0-e>0&&(g=0-e);var h=0;f+e-0-d>0&&(h=f+e-0-d);var i=0;f-(g+h)>0&&(i=f-(g+h));var j=0;0!==f&&(j=i/f),a.contentWindow.postMessage(JSON.stringify({vis:j}),b)}},e=function(a){var c=window.onetAds||window.dlApi;if(void 0!==c){var d={DV:c.dv,target:c.target,du:c.du,dr:c.dr,tid:c.tid};a.contentWindow.postMessage(JSON.stringify({adsAndStats:d,url:window.location}),b)}},f=[],g=function(a,b){return!!(a&&a.settings&&a.settings.click2Activate&&a.settings.click2Activate.length&&a.settings.click2Activate.indexOf(b.providerName)>-1)},h=function(a){var b=a.getAttribute("data-src");if(b){a.providerName=a.getAttribute("data-provider-name")||"",a.embedImg=a.getAttribute("data-embed-img")||"https://pulse2embed.ocdn.eu/click2Activate/placeholder.jpg",a.class=a.getAttribute("data-embed-img")?"":"p2e_Placeholder";var c="undefined"==typeof pulse2EmbedConfig?{}:pulse2EmbedConfig;if(g(c,a)){var d=function(c){a.removeEventListener("click",d),i(a,b)},e=a.querySelector("a")&&a.querySelector("a").innerText?'<div class="p2e_title">'+a.querySelector("a").innerText+"</div>":"",f=document.head,h=document.createElement("link");""===e&&(a.class+=" p2e_noTitle"),h.type="text/css",h.rel="stylesheet",h.href="https://pulse2embed.ocdn.eu/click2Activate/click2activ3.min.css",f.appendChild(h);var j=document.createElement("div");if(j.setAttribute("class","p2e_click2activate p2em_"+a.providerName+" "+a.class),j.setAttribute("style","min-height:100px;"),j.innerHTML=e+'<img class="p2e_click2active_image" style="max-width:100%" src="'+a.embedImg+'">',a.innerHTML="",a.appendChild(j),a.addEventListener("click",d),"OnettvVideo"===a.providerName||"pulsevideo"===a.providerName){a.classList.add("mvp-embed-wrapper");var k=window.onetAds||window.dlApi;if(!k)return;k.cmd=k.cmd||[],k.cmd.push(function(){window.postMessage("mvp_deployBranding","*")})}}else i(a,b)}},i=function(b,g){g=a+"//"+g.split("//")[1];var h=(b.getAttribute("data-height-hint")||"").trim();h=""===h?"1px":h;var i=b.getAttribute("data-sandbox")||"standard";b.removeAttribute("data-src"),b.removeAttribute("data-height-hint"),b.removeAttribute("data-sandbox"),b.removeAttribute("data-run-module");var j=c();b.setAttribute("data-id",j),b.style.position="relative",b.style.display="block",b.style.height=0,b.style.padding=0,b.style.overflow="hidden",b.style["padding-bottom"]=h,b.embedId=b.getAttribute("data-embed-id")||"";var k=document.createElement("iframe");k.src=g,k.setAttribute("frameborder",0),"standard"===i?k.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation"):"distrusted"===i&&k.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin"),k.setAttribute("webkitallowfullscreen","webkitallowfullscreen"),k.setAttribute("mozallowfullscreen","mozallowfullscreen"),k.setAttribute("allowfullscreen","allowfullscreen"),k.setAttribute("allow","autoplay; encrypted-media"),k.style.position="absolute",k.style.top="0",k.style.bottom="0",k.style.left="0",k.style.width="100%",k.style.height="100%",k.style.border="none",k.onload=function(){e(k),d(k)},f.push({iframe:k,wrapper:b}),b.appendChild(k)},j=function(a,b){var c,d={};a.default&&(d.default=a.default),a[b]&&(d[b]=a[b]);try{c=JSON.stringify({pulse2EmbedConfig:{config:d,url:window.location}})}catch(a){c="{}"}return c},k=function(a){var c=a.data||{};if(c.pulsembed){for(var d,e=0;e<f.length;e++)if((f[e].iframe||{}).contentWindow===a.source){d=f[e];break}if(!d)return;if(c=c.pulsembed,c.height){var g=parseInt(c.height);d.wrapper.style.height=g+"px"}else if(c.loaded)for(var h=d.wrapper.childNodes,i=h.length;i>0;i--){var k=h.item(i-1);k!==d.iframe&&d.wrapper.removeChild(k)}else if(c.getConfigFor){var l={default:{}};"undefined"!=typeof pulse2EmbedConfig&&pulse2EmbedConfig&&(l=pulse2EmbedConfig);var m=j(l,c.getConfigFor);d.iframe.contentWindow.postMessage(m,b)}else if(c.addClass){var n=c.addClass;"string"==typeof n&&-1===d.wrapper.className.indexOf(n)&&(d.wrapper.className+=" "+n)}else if(c.scrollingIframe){var o=c.scrollingIframe;"string"==typeof o&&-1!==["yes","no","auto"].indexOf(o)&&(d.iframe.scrolling=o)}else if(c.expand){if(c.expand.src&&c.expand.style){var p=document.getElementsByTagName("body")[0],q=document.createElement("iframe");q.setAttribute("src",""+c.expand.src),q.setAttribute("style",""+c.expand.style),q.setAttribute("allowfullscreen",""),q.setAttribute("id","pulsEmbedExpand"),p.appendChild(q),document.getElementsByTagName("html")[0].style.overflow="hidden"}}else if(c.dleBroadcast){c.dleBroadcast.id=d.wrapper.embedId||c.dleBroadcast.id||"",c.dleBroadcast.provider=d.wrapper.providerName||c.dleBroadcast.provider||"";for(var r=0;r<f.length;++r)(f[r].iframe||{}).contentWindow&&f[r].iframe.contentWindow.postMessage(JSON.stringify(c),b)}}c.closeExpand&&"1"===c.closeExpand.close&&document.getElementById("pulsEmbedExpand")&&(document.getElementById("pulsEmbedExpand").remove(),document.getElementsByTagName("html")[0].style.overflow="visible")},l=function(a){for(var b=0;b<f.length;b++)d(f[b].iframe)},m=!1,n=function(a){m||(m=!0,setTimeout(function(){m=!1,l()},300))};return window.addEventListener?(window.addEventListener("message",k,!1),window.addEventListener("scroll",n,!1),window.addEventListener("resize",n,!1),window.addEventListener("click",l,!1)):window.attachEvent&&(window.attachEvent("onmessage",k),window.attachEvent("onscroll",n),window.attachEvent("onresize",n),window.attachEvent("onclick",l)),{init:h,version:"1.2.9"}});